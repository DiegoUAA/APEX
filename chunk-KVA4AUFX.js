import{Bc as A,X as _,Y as g,ba as c,ga as v,gb as C,i as m,ib as u,mb as P,nb as R,pa as E,pb as y,ta as w,xa as D,zc as M}from"./chunk-RNRL7HBI.js";var s=class{_attachedHost;attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;e!=null&&(this._attachedHost=null,e.detach())}get isAttached(){return this._attachedHost!=null}setAttachedHost(e){this._attachedHost=e}},h=class extends s{component;viewContainerRef;injector;componentFactoryResolver;projectableNodes;constructor(e,t,o,i,r){super(),this.component=e,this.viewContainerRef=t,this.injector=o,this.projectableNodes=r}},d=class extends s{templateRef;viewContainerRef;context;injector;constructor(e,t,o,i){super(),this.templateRef=e,this.viewContainerRef=t,this.context=o,this.injector=i}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}},l=class extends s{element;constructor(e){super(),this.element=e instanceof D?e.nativeElement:e}},a=class{_attachedPortal;_disposeFn;_isDisposed=!1;hasAttached(){return!!this._attachedPortal}attach(e){if(e instanceof h)return this._attachedPortal=e,this.attachComponentPortal(e);if(e instanceof d)return this._attachedPortal=e,this.attachTemplatePortal(e);if(this.attachDomPortal&&e instanceof l)return this._attachedPortal=e,this.attachDomPortal(e)}attachDomPortal=null;detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}};var f=class extends a{outletElement;_appRef;_defaultInjector;_document;constructor(e,t,o,i,r){super(),this.outletElement=e,this._appRef=o,this._defaultInjector=i,this._document=r}attachComponentPortal(e){let t;if(e.viewContainerRef){let o=e.injector||e.viewContainerRef.injector,i=o.get(u,null,{optional:!0})||void 0;t=e.viewContainerRef.createComponent(e.component,{index:e.viewContainerRef.length,injector:o,ngModuleRef:i,projectableNodes:e.projectableNodes||void 0}),this.setDisposeFn(()=>t.destroy())}else{let o=this._appRef,i=e.injector||this._defaultInjector||E.NULL,r=i.get(v,o.injector);t=M(e.component,{elementInjector:i,environmentInjector:r,projectableNodes:e.projectableNodes||void 0}),o.attachView(t.hostView),this.setDisposeFn(()=>{o.viewCount>0&&o.detachView(t.hostView),t.destroy()})}return this.outletElement.appendChild(this._getComponentRootNode(t)),this._attachedPortal=e,t}attachTemplatePortal(e){let t=e.viewContainerRef,o=t.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return o.rootNodes.forEach(i=>this.outletElement.appendChild(i)),o.detectChanges(),this.setDisposeFn(()=>{let i=t.indexOf(o);i!==-1&&t.remove(i)}),this._attachedPortal=e,o}attachDomPortal=e=>{let t=e.element;t.parentNode;let o=this._document.createComment("dom-portal");t.parentNode.insertBefore(o,t),this.outletElement.appendChild(t),this._attachedPortal=e,super.setDisposeFn(()=>{o.parentNode&&o.parentNode.replaceChild(t,o)})};dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}};var j=(()=>{class n extends a{_moduleRef=c(u,{optional:!0});_document=c(A);_viewContainerRef=c(C);_isInitialized=!1;_attachedRef;constructor(){super()}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t||null)}attached=new w;get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(t){t.setAttachedHost(this);let o=t.viewContainerRef!=null?t.viewContainerRef:this._viewContainerRef,i=o.createComponent(t.component,{index:o.length,injector:t.injector||o.injector,projectableNodes:t.projectableNodes||void 0,ngModuleRef:this._moduleRef||void 0});return o!==this._viewContainerRef&&this._getRootNode().appendChild(i.hostView.rootNodes[0]),super.setDisposeFn(()=>i.destroy()),this._attachedPortal=t,this._attachedRef=i,this.attached.emit(i),i}attachTemplatePortal(t){t.setAttachedHost(this);let o=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=o,this.attached.emit(o),o}attachDomPortal=t=>{let o=t.element;o.parentNode;let i=this._document.createComment("dom-portal");t.setAttachedHost(this),o.parentNode.insertBefore(i,o),this._getRootNode().appendChild(o),this._attachedPortal=t,super.setDisposeFn(()=>{i.parentNode&&i.parentNode.replaceChild(o,i)})};_getRootNode(){let t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}static \u0275fac=function(o){return new(o||n)};static \u0275dir=R({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:[0,"cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[y]})}return n})();var x=(()=>{class n{static \u0275fac=function(o){return new(o||n)};static \u0275mod=P({type:n});static \u0275inj=g({})}return n})();var k=(()=>{class n{_listeners=[];notify(t,o){for(let i of this._listeners)i(t,o)}listen(t){return this._listeners.push(t),()=>{this._listeners=this._listeners.filter(o=>t!==o)}}ngOnDestroy(){this._listeners=[]}static \u0275fac=function(o){return new(o||n)};static \u0275prov=_({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var p=class{_multiple;_emitChanges;compareWith;_selection=new Set;_deselectedToEmit=[];_selectedToEmit=[];_selected;get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}changed=new m;constructor(e=!1,t,o=!0,i){this._multiple=e,this._emitChanges=o,this.compareWith=i,t&&t.length&&(e?t.forEach(r=>this._markSelected(r)):this._markSelected(t[0]),this._selectedToEmit.length=0)}select(...e){this._verifyValueAssignment(e),e.forEach(o=>this._markSelected(o));let t=this._hasQueuedChanges();return this._emitChangeEvent(),t}deselect(...e){this._verifyValueAssignment(e),e.forEach(o=>this._unmarkSelected(o));let t=this._hasQueuedChanges();return this._emitChangeEvent(),t}setSelection(...e){this._verifyValueAssignment(e);let t=this.selected,o=new Set(e.map(r=>this._getConcreteValue(r)));e.forEach(r=>this._markSelected(r)),t.filter(r=>!o.has(this._getConcreteValue(r,o))).forEach(r=>this._unmarkSelected(r));let i=this._hasQueuedChanges();return this._emitChangeEvent(),i}toggle(e){return this.isSelected(e)?this.deselect(e):this.select(e)}clear(e=!0){this._unmarkAll();let t=this._hasQueuedChanges();return e&&this._emitChangeEvent(),t}isSelected(e){return this._selection.has(this._getConcreteValue(e))}isEmpty(){return this._selection.size===0}hasValue(){return!this.isEmpty()}sort(e){this._multiple&&this.selected&&this._selected.sort(e)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(e){e=this._getConcreteValue(e),this.isSelected(e)||(this._multiple||this._unmarkAll(),this.isSelected(e)||this._selection.add(e),this._emitChanges&&this._selectedToEmit.push(e))}_unmarkSelected(e){e=this._getConcreteValue(e),this.isSelected(e)&&(this._selection.delete(e),this._emitChanges&&this._deselectedToEmit.push(e))}_unmarkAll(){this.isEmpty()||this._selection.forEach(e=>this._unmarkSelected(e))}_verifyValueAssignment(e){e.length>1&&this._multiple}_hasQueuedChanges(){return!!(this._deselectedToEmit.length||this._selectedToEmit.length)}_getConcreteValue(e,t){if(this.compareWith){t=t??this._selection;for(let o of t)if(this.compareWith(e,o))return o;return e}else return e}};export{h as a,d as b,a as c,f as d,j as e,x as f,k as g,p as h};
